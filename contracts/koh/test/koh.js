const KingAutomaton = artifacts.require("KingAutomaton");

const owner = '0x0000000000000000000000000000001234567890';

contract('KingAutomaton', (accounts) => {
  it('64K validator slots | All 21 claimed when difficulty is ascending', async () => {
    const koh = await KingAutomaton.new(65536, false);
    await koh.claimSlot('0xFFFF00790FD2FB3B4460512D490A8A9B4FA39EAA6AC2AD7AF8BB0DFD144F6525', '0x7B882C85D49CF89A62606C78A8A583E2D257912A400C3C35E381B44D928F7F53', owner, '0x1C', '0x7BD34A6315015E03FCCCE9DD38423FA729AC2674E4F70B598DF64DAF36416A91', '0x69298005E90E718C9239B81DC32D0268EF0725D42AB205E3B470E30D5D514244')
    await koh.claimSlot('0xFFFF0244DFB39244CEB8A7C08D5EFB052FDB921EA94E1460371DB3B53674AACB', '0xBFDB9F009B057C067D18E2C2F83D9486D4957DED0F715505A184EEFB592A4B93', owner, '0x1C', '0xFEB04DBABA5A9A4A20AFB736BFC5866138753B7339F4DAE54D98B2E3E53709DB', '0x69A263CE73975B2932A75BAD5E146A60B59E12CD4305CFFB45D4EDC266C3DDDF')
    await koh.claimSlot('0xFFFF02BA43452B4D8978CCE917281C2482D2FDD6987C596BFAF5CB0069FFC442', '0x7B3E8D268FC18BAFB9A137E38361CB74F7D35FEEC0390A62A6D8F2A4312AFA48', owner, '0x1C', '0xE02FE2EA0F27534DE834996D94BC51083B27EA3B9F5D8443ADC8730925D508F6', '0x468C5899B30C7B05006130F912706FF83E35909A691CC662D7220A5A4822BFD1')
    await koh.claimSlot('0xFFFF158CCAFBF465D6F356CDF056C6FBA9E0671AFF258A704D48504553AA6BEF', '0xF72E9599CE165BE472F633981000D71DCAF9727344C01DF440506F73F477E0B3', owner, '0x1B', '0xA4C1BBDB5BF882C1136EE093E07FA9D7AA5CC63A261CC27653169539E6AC9578', '0x711B7822AA0A7957F97EC5811F22AAEF39A1BA1AC1F0B984EFDFA3830728126A')
    await koh.claimSlot('0xFFFF15FEC3D933D0661596BDD18053FE777D8AFE48F5BA2ABA617C8CCCCA3E20', '0x0B1D9A92F74A8F73DD1B3F131047D6344A0160F34AE6073A29C086CC08367E98', owner, '0x1B', '0xF3AC232ABC7BAA142F09F476958E35ABEC29008AF91A3D35B8E07E682B35EBE1', '0x21E649C6D33C7188F01F5DF721BD7E6357C5A0590EB5CB43EE48C7C36563483A')
    await koh.claimSlot('0xFFFF24B574E675A5B091AA23DA740DD5E9B0A2A5A7DA70D9518D10E6F868D16E', '0x6A5945D3842E830CCC6803179C4F78D4C862EDE9FA6D8EB04DB6B31CC4576CD8', owner, '0x1B', '0xA48E3805C45FFDBFD23F0709B82951AFC39F39CC0A7234CBA9EA924BB0084F13', '0x4D3B3FB7BEDB569354A27F05BE83091EF3560A8A714D5E569C61462882F33370')
    await koh.claimSlot('0xFFFF3BA3E07AE1AE37EBF9BD7009113DB7C53DCF03E7A86B45B2240578D73B2A', '0xD2B950C849B14CA92EC217A389406389B79F40CA8927E6526426156DA71C1F90', owner, '0x1B', '0xF153FB5D515794AA9F46CDB7707B8A20420001E9CC90C7995DB1EA34136D5D7D', '0x6B23194D1A7831CAB003A11E2411AF667091388B1FCCB6C67FB1214F284CB02E')
    await koh.claimSlot('0xFFFF41C3547906686A48CEEF049913CB5F376FD56B15AC7236C17E36D7BC1280', '0x08A73C5C2CEE72876ED7A4FE9F6BDD414BBF210FBE0E51C2D24082256A244A52', owner, '0x1C', '0x7025D44D7F120821FF3871D24B5A0B7BC56147081B2804B2720550906B5289AD', '0x1EA3BF122C8AB92E824DDE4FEFFEF2A557D6D5829ABE6FC6AF9D4777B16FD1C7')
    await koh.claimSlot('0xFFFF471BEA59AC82F7ADBD548AF7C57D6A90F9CD27A70A4D4525F4EC92A2E75B', '0xAAB7B95E8394F563FCB8F980026BBF9DE5A7485BEA1766209FEF7F924C306743', owner, '0x1C', '0xFF09CF767C54FE474C2B04B30375157D00D2BE86EE866A409D2B315418BD5053', '0x27AE5D7878E575E6BED53FF9D6C1DEB6C33AAD7D9150C5C250DA439AD9C825AE')
    await koh.claimSlot('0xFFFF49848030B472B5777A3FAFE90D8409EB29CA50F7E0B414BBC69409F5361F', '0xCC7DEDC54B4DB0B80B3216A6E43B063560B9A05FB2BB401BDC24FDB3A0B4D7BF', owner, '0x1C', '0x9A526CB75C7A1607091A5CE0A003236D3DB693B97BBEA69186C3A4ABA136D6F0', '0x0D46211CDF55A6CFB132A0FD7107713249E5937D444A6A55ABC08B4C8E2FF86C')
    await koh.claimSlot('0xFFFF5C8F2F1C3FADB5E621619C05C042EF62A81B42DCE2597EB8C22D71F90609', '0x457F2BEAA42CB6DE12D01C08B8D6DD28B282F306D6E683F108C46B7C9C12EA95', owner, '0x1C', '0xFDE8DDC60D2E3B83B6FFE7483B943545E17B9BF23989D26DE1A43DC5B9503C99', '0x31233104A23BFE7F7427C1CFDBCAEC75C62A2B3785B2A66BF58B2A25562824C9')
    await koh.claimSlot('0xFFFF63CAA2DBE1AA7295C5E6FA697DC625D726422D83165BA5E808C15EEB732F', '0xC1855EBB8169891AE6CDBF5690B484FE9A3FD069B641B49AE557EE0D5D170532', owner, '0x1B', '0xB3FB4EE9B819411C67E5DFE7495E3167FF3C54AD1405D74DF8BBD6E1A9DE395D', '0x4C5F48F6D358BE6E5EF1D690A173FBFA2FF64CC0B1C4EB1D30B66BC3259CDF03')
    await koh.claimSlot('0xFFFF717EF6D87DF3678964D156C313DA236910D5B65B3D8060426FE9E7E775B7', '0x869AFC825EEF83DC881D92ADC2EA7D8A4A6FEE16F52A3471D5E368B47AA5C23A', owner, '0x1B', '0xD49B6FF0AEEAE95B3117336D85D457B00129015A4FF591A8F82AB88EF51CC325', '0x5A3E8FD090455DB1190DB03BF672861AEBBF7B51B18CAF559162C882E236CD93')
    await koh.claimSlot('0xFFFF778322F263155278789D03AF0419618BC60B1C3A74B42899801918A21748', '0x2BF18DB9B133111D98C7C4538D2C146F0E2CBCA170405C7C6472900F934AC2F2', owner, '0x1B', '0xDFE10848F19A0A7A21740E711404F900F511E169DE83CEE36D5AC689B77DFCDE', '0x02585E645D46EB40DF3A0B7EDBF13FC2DB64B5D06CA96BD940B1344762622329')
    await koh.claimSlot('0xFFFF848209518F24378A94907BC67560D687E9DC3AAE02746328E35A76121894', '0x0FBB9E7F56C0969278146F06DF6CF6850A944461CBCEC379BBF304AE3B3B9867', owner, '0x1B', '0x0B349CCED47C261ADEC6D004DC35D816495BEE24E4727A96F18E9D497B5538D6', '0x64F5B86B13347221A4A01B47C53489A326B08BAD90367A588E80985DF02F3826')
    await koh.claimSlot('0xFFFF8B38DCD280E8C75D98F2508ADC01545F2451326FCA907D5754271F9DDA84', '0x69A6792DC9FFDCB66C30D06A03085C7960E698C1BB65322C5887032957BDE1F0', owner, '0x1B', '0x80DE77BB428821A312D88AE80EA03495D6FC50198C45C5E0FAE4939C662EDBE0', '0x15CA869DD520E5977B6BE16E658601671ED4E7287187B534A6ECE8AFBAA65117')
    await koh.claimSlot('0xFFFF98B0FBD2C9F56546BFAFB7FFADDDC79DD682CAAF09579AEDACCD98645188', '0x7C2E4B3AF0092029CA4CBF230C31A516D42A3445E095328142AEEAA83DF635C0', owner, '0x1C', '0xE2DF0C552B5CB21F5E8AEF247B554F2FF9A1D9E8A07E198EBD1725502BF5E2AF', '0x421CA9DC9712C9E944AFD4E02CCC9E4FCD2847E2C14F631B233A0423DE349537')
    await koh.claimSlot('0xFFFF9F12F38A94EC725AA1CE588A73600B85ABFF3EFC50BEF5403598551B7E30', '0x573D9BC509724313149FAF3AB124529C797454681F66AFE67FF1950040C73DB6', owner, '0x1C', '0xA51A09020A82576C192DAEA89630937B7B5E92BE7AAA62DFE6A9C43BC04C52A5', '0x4CE7130C1F85ABA3A9F4413DED706AD0AA580F673B71B27FAE62277073A176A3')
    await koh.claimSlot('0xFFFFA5FC9A9D6AFE0B46DE624FD690953D97B77209B1879C38414E228E9E7D17', '0xC1541BC291D63F2998BC8C5ABF09E41D2EB163E3E4D9D01793649818CBCFA161', owner, '0x1B', '0x17F83F3DD2BF7103B34CCEFB39E4D68A61E75796862D9A6DEC357CD19E3EA715', '0x34C8587AE52CFBBD032E9B44649A7A8BAC0DE46AE86D2EEF57C7CF12A553C04C')
    await koh.claimSlot('0xFFFFDF0971A9BD22A8FCF4F205B0BD87AF6CDADBAA101BBE24464F388EDC7EA0', '0xAD50C7D57D19A12E2CC2E93DC664407DD06263035F15E38A44EADF10DAFB3172', owner, '0x1B', '0x24BB0D2435E397FDEB3F60BE52FB8FEC16429A10870544CD7CB6A453D3C177EA', '0x53724F47EEDC299C7F3E014BF40DADD0ACC445CBD439E7ACD53AE6113947B793')
    await koh.claimSlot('0xFFFFF4CFCED839254C4D844087BE409735BC1A7235FF555B2054F716A1AAE241', '0xCA6441D73C662DD2A9665325D4E556D488E92A67D8B7EB5B0082F322505D36F4', owner, '0x1B', '0x941CE9FE34EB1831D74285EF66E879B696A63291126378CAD600E10C2D353286', '0x69C00320B940889324CE932A66F8C3BD1B6330988B7CED3426C0F0895F5ADF5E')
    assert.equal((await koh.getClaimed()).toNumber(), 21, "Should have registered 21 validator slots");
    // Last 4 hex digits of the X public key form the slot number.
    assert.equal((await koh.getSlotOwner('0x6525')).toString(16), owner, "Ensure ownership based on slot");
    assert.equal((await koh.getSlotOwner('0xAACB')).toString(16), owner, "Ensure ownership based on slot");
    assert.equal((await koh.getSlotOwner('0xC442')).toString(16), owner, "Ensure ownership based on slot");
    assert.equal((await koh.getSlotOwner('0x0000')), "0x0000000000000000000000000000000000000000", "Ensure ownership based on slot");
  });
  it(' 16 validator slots | Only 4 claimed when difficulty is descending', async () => {
    const koh = await KingAutomaton.new(4, false);
    await koh.claimSlot('0xFFFFF4CFCED839254C4D844087BE409735BC1A7235FF555B2054F716A1AAE241', '0xCA6441D73C662DD2A9665325D4E556D488E92A67D8B7EB5B0082F322505D36F4', owner, '0x1B', '0x941CE9FE34EB1831D74285EF66E879B696A63291126378CAD600E10C2D353286', '0x69C00320B940889324CE932A66F8C3BD1B6330988B7CED3426C0F0895F5ADF5E')
    await koh.claimSlot('0xFFFFDF0971A9BD22A8FCF4F205B0BD87AF6CDADBAA101BBE24464F388EDC7EA0', '0xAD50C7D57D19A12E2CC2E93DC664407DD06263035F15E38A44EADF10DAFB3172', owner, '0x1B', '0x24BB0D2435E397FDEB3F60BE52FB8FEC16429A10870544CD7CB6A453D3C177EA', '0x53724F47EEDC299C7F3E014BF40DADD0ACC445CBD439E7ACD53AE6113947B793')
    await koh.claimSlot('0xFFFFA5FC9A9D6AFE0B46DE624FD690953D97B77209B1879C38414E228E9E7D17', '0xC1541BC291D63F2998BC8C5ABF09E41D2EB163E3E4D9D01793649818CBCFA161', owner, '0x1B', '0x17F83F3DD2BF7103B34CCEFB39E4D68A61E75796862D9A6DEC357CD19E3EA715', '0x34C8587AE52CFBBD032E9B44649A7A8BAC0DE46AE86D2EEF57C7CF12A553C04C')
    await koh.claimSlot('0xFFFF9F12F38A94EC725AA1CE588A73600B85ABFF3EFC50BEF5403598551B7E30', '0x573D9BC509724313149FAF3AB124529C797454681F66AFE67FF1950040C73DB6', owner, '0x1C', '0xA51A09020A82576C192DAEA89630937B7B5E92BE7AAA62DFE6A9C43BC04C52A5', '0x4CE7130C1F85ABA3A9F4413DED706AD0AA580F673B71B27FAE62277073A176A3')
    await koh.claimSlot('0xFFFF98B0FBD2C9F56546BFAFB7FFADDDC79DD682CAAF09579AEDACCD98645188', '0x7C2E4B3AF0092029CA4CBF230C31A516D42A3445E095328142AEEAA83DF635C0', owner, '0x1C', '0xE2DF0C552B5CB21F5E8AEF247B554F2FF9A1D9E8A07E198EBD1725502BF5E2AF', '0x421CA9DC9712C9E944AFD4E02CCC9E4FCD2847E2C14F631B233A0423DE349537')
    await koh.claimSlot('0xFFFF8B38DCD280E8C75D98F2508ADC01545F2451326FCA907D5754271F9DDA84', '0x69A6792DC9FFDCB66C30D06A03085C7960E698C1BB65322C5887032957BDE1F0', owner, '0x1B', '0x80DE77BB428821A312D88AE80EA03495D6FC50198C45C5E0FAE4939C662EDBE0', '0x15CA869DD520E5977B6BE16E658601671ED4E7287187B534A6ECE8AFBAA65117')
    await koh.claimSlot('0xFFFF848209518F24378A94907BC67560D687E9DC3AAE02746328E35A76121894', '0x0FBB9E7F56C0969278146F06DF6CF6850A944461CBCEC379BBF304AE3B3B9867', owner, '0x1B', '0x0B349CCED47C261ADEC6D004DC35D816495BEE24E4727A96F18E9D497B5538D6', '0x64F5B86B13347221A4A01B47C53489A326B08BAD90367A588E80985DF02F3826')
    await koh.claimSlot('0xFFFF778322F263155278789D03AF0419618BC60B1C3A74B42899801918A21748', '0x2BF18DB9B133111D98C7C4538D2C146F0E2CBCA170405C7C6472900F934AC2F2', owner, '0x1B', '0xDFE10848F19A0A7A21740E711404F900F511E169DE83CEE36D5AC689B77DFCDE', '0x02585E645D46EB40DF3A0B7EDBF13FC2DB64B5D06CA96BD940B1344762622329')
    await koh.claimSlot('0xFFFF717EF6D87DF3678964D156C313DA236910D5B65B3D8060426FE9E7E775B7', '0x869AFC825EEF83DC881D92ADC2EA7D8A4A6FEE16F52A3471D5E368B47AA5C23A', owner, '0x1B', '0xD49B6FF0AEEAE95B3117336D85D457B00129015A4FF591A8F82AB88EF51CC325', '0x5A3E8FD090455DB1190DB03BF672861AEBBF7B51B18CAF559162C882E236CD93')
    await koh.claimSlot('0xFFFF63CAA2DBE1AA7295C5E6FA697DC625D726422D83165BA5E808C15EEB732F', '0xC1855EBB8169891AE6CDBF5690B484FE9A3FD069B641B49AE557EE0D5D170532', owner, '0x1B', '0xB3FB4EE9B819411C67E5DFE7495E3167FF3C54AD1405D74DF8BBD6E1A9DE395D', '0x4C5F48F6D358BE6E5EF1D690A173FBFA2FF64CC0B1C4EB1D30B66BC3259CDF03')
    await koh.claimSlot('0xFFFF5C8F2F1C3FADB5E621619C05C042EF62A81B42DCE2597EB8C22D71F90609', '0x457F2BEAA42CB6DE12D01C08B8D6DD28B282F306D6E683F108C46B7C9C12EA95', owner, '0x1C', '0xFDE8DDC60D2E3B83B6FFE7483B943545E17B9BF23989D26DE1A43DC5B9503C99', '0x31233104A23BFE7F7427C1CFDBCAEC75C62A2B3785B2A66BF58B2A25562824C9')
    await koh.claimSlot('0xFFFF49848030B472B5777A3FAFE90D8409EB29CA50F7E0B414BBC69409F5361F', '0xCC7DEDC54B4DB0B80B3216A6E43B063560B9A05FB2BB401BDC24FDB3A0B4D7BF', owner, '0x1C', '0x9A526CB75C7A1607091A5CE0A003236D3DB693B97BBEA69186C3A4ABA136D6F0', '0x0D46211CDF55A6CFB132A0FD7107713249E5937D444A6A55ABC08B4C8E2FF86C')
    await koh.claimSlot('0xFFFF471BEA59AC82F7ADBD548AF7C57D6A90F9CD27A70A4D4525F4EC92A2E75B', '0xAAB7B95E8394F563FCB8F980026BBF9DE5A7485BEA1766209FEF7F924C306743', owner, '0x1C', '0xFF09CF767C54FE474C2B04B30375157D00D2BE86EE866A409D2B315418BD5053', '0x27AE5D7878E575E6BED53FF9D6C1DEB6C33AAD7D9150C5C250DA439AD9C825AE')
    await koh.claimSlot('0xFFFF41C3547906686A48CEEF049913CB5F376FD56B15AC7236C17E36D7BC1280', '0x08A73C5C2CEE72876ED7A4FE9F6BDD414BBF210FBE0E51C2D24082256A244A52', owner, '0x1C', '0x7025D44D7F120821FF3871D24B5A0B7BC56147081B2804B2720550906B5289AD', '0x1EA3BF122C8AB92E824DDE4FEFFEF2A557D6D5829ABE6FC6AF9D4777B16FD1C7')
    await koh.claimSlot('0xFFFF3BA3E07AE1AE37EBF9BD7009113DB7C53DCF03E7A86B45B2240578D73B2A', '0xD2B950C849B14CA92EC217A389406389B79F40CA8927E6526426156DA71C1F90', owner, '0x1B', '0xF153FB5D515794AA9F46CDB7707B8A20420001E9CC90C7995DB1EA34136D5D7D', '0x6B23194D1A7831CAB003A11E2411AF667091388B1FCCB6C67FB1214F284CB02E')
    await koh.claimSlot('0xFFFF24B574E675A5B091AA23DA740DD5E9B0A2A5A7DA70D9518D10E6F868D16E', '0x6A5945D3842E830CCC6803179C4F78D4C862EDE9FA6D8EB04DB6B31CC4576CD8', owner, '0x1B', '0xA48E3805C45FFDBFD23F0709B82951AFC39F39CC0A7234CBA9EA924BB0084F13', '0x4D3B3FB7BEDB569354A27F05BE83091EF3560A8A714D5E569C61462882F33370')
    await koh.claimSlot('0xFFFF15FEC3D933D0661596BDD18053FE777D8AFE48F5BA2ABA617C8CCCCA3E20', '0x0B1D9A92F74A8F73DD1B3F131047D6344A0160F34AE6073A29C086CC08367E98', owner, '0x1B', '0xF3AC232ABC7BAA142F09F476958E35ABEC29008AF91A3D35B8E07E682B35EBE1', '0x21E649C6D33C7188F01F5DF721BD7E6357C5A0590EB5CB43EE48C7C36563483A')
    await koh.claimSlot('0xFFFF158CCAFBF465D6F356CDF056C6FBA9E0671AFF258A704D48504553AA6BEF', '0xF72E9599CE165BE472F633981000D71DCAF9727344C01DF440506F73F477E0B3', owner, '0x1B', '0xA4C1BBDB5BF882C1136EE093E07FA9D7AA5CC63A261CC27653169539E6AC9578', '0x711B7822AA0A7957F97EC5811F22AAEF39A1BA1AC1F0B984EFDFA3830728126A')
    await koh.claimSlot('0xFFFF02BA43452B4D8978CCE917281C2482D2FDD6987C596BFAF5CB0069FFC442', '0x7B3E8D268FC18BAFB9A137E38361CB74F7D35FEEC0390A62A6D8F2A4312AFA48', owner, '0x1C', '0xE02FE2EA0F27534DE834996D94BC51083B27EA3B9F5D8443ADC8730925D508F6', '0x468C5899B30C7B05006130F912706FF83E35909A691CC662D7220A5A4822BFD1')
    await koh.claimSlot('0xFFFF0244DFB39244CEB8A7C08D5EFB052FDB921EA94E1460371DB3B53674AACB', '0xBFDB9F009B057C067D18E2C2F83D9486D4957DED0F715505A184EEFB592A4B93', owner, '0x1C', '0xFEB04DBABA5A9A4A20AFB736BFC5866138753B7339F4DAE54D98B2E3E53709DB', '0x69A263CE73975B2932A75BAD5E146A60B59E12CD4305CFFB45D4EDC266C3DDDF')
    await koh.claimSlot('0xFFFF00790FD2FB3B4460512D490A8A9B4FA39EAA6AC2AD7AF8BB0DFD144F6525', '0x7B882C85D49CF89A62606C78A8A583E2D257912A400C3C35E381B44D928F7F53', '0x0000000000000000000000000000001234567890', '0x1C', '0x7BD34A6315015E03FCCCE9DD38423FA729AC2674E4F70B598DF64DAF36416A91', '0x69298005E90E718C9239B81DC32D0268EF0725D42AB205E3B470E30D5D514244')
    assert.equal(
          (await koh.getClaimed()).toNumber(),
          4,
          "Should have registered exactly 16 validator slots"
        );
  });
});
